services:
  jupyter1:
    restart: always
    build:
      context: .
    ports:
      - 8888:8888
    volumes:
      - ~/projects:/home/jovyan/projects
      - ./.jupyter:/home/jovyan/.jupyter
      - ~/.cache:/home/jovyan/.cache
      - conda_envs:/opt/conda/
    command: start-notebook.py --NotebookApp.token='changethis'
    extra_hosts:
      - "host.docker.internal:host-gateway"

  # jupyter2:
  #   restart: always
  #   build:
  #     context: .
  #   ports:
  #     - 8887:8888
  #   volumes:
  #     - ~/projects:/home/jovyan/projects
  #     - ./.jupyter2:/home/jovyan/.jupyter
  #     - ~/.cache:/home/jovyan/.cache
  #     - conda_envs2:/opt/conda/
  #   command: start-notebook.py --NotebookApp.token='changethis2'
  #
  # jupyter3:
  #   restart: always
  #   build:
  #     context: .
  #   ports:
  #     - 8889:8888
  #   volumes:
  #     - ~/projects:/home/jovyan/projects
  #     - ./.jupyter3:/home/jovyan/.jupyter
  #     - ~/.cache:/home/jovyan/.cache
  #     - conda_envs3:/opt/conda/
  #   command: start-notebook.py --NotebookApp.token='changethis3'

volumes:
  conda_envs:
    driver: local
  # conda_envs2:
  #   driver: local
  # conda_envs3:
  #   driver: local
